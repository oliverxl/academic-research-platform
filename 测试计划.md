# 学术研究平台测试计划

## 测试目标

本测试计划旨在确保学术研究平台的所有功能正常工作，并提供良好的用户体验。测试将涵盖前端界面、后端智能合约、Walrus存储集成以及整体系统性能。

## 测试环境

- **开发环境**：本地开发机器
- **测试环境**：Sui测试网
- **生产环境**：Sui主网（最终部署）

## 测试类型

### 1. 单元测试

#### 前端单元测试

- **工具**：Jest, React Testing Library
- **测试范围**：
  - 组件渲染
  - 状态管理
  - 事件处理
  - 服务函数

#### 后端单元测试

- **工具**：Sui Move测试框架
- **测试范围**：
  - 智能合约函数
  - 访问控制逻辑
  - 数据结构操作

### 2. 集成测试

- **工具**：Cypress
- **测试范围**：
  - 前端与Sui区块链的交互
  - 前端与Walrus存储的交互
  - 用户流程测试

### 3. 性能测试

- **工具**：Lighthouse, WebPageTest
- **测试范围**：
  - 页面加载时间
  - 大文件上传/下载性能
  - 搜索响应时间
  - 区块链交互延迟

### 4. 安全测试

- **工具**：OWASP ZAP, Move Prover
- **测试范围**：
  - 前端漏洞扫描
  - 智能合约安全审计
  - 权限控制测试

## 测试用例

### 用户认证测试

| ID | 测试用例 | 前置条件 | 步骤 | 预期结果 |
|----|---------|---------|------|---------|
| AUTH-01 | 钱包连接 | 用户已安装Sui钱包 | 1. 点击"连接钱包"<br>2. 在钱包中确认连接 | 成功连接钱包，显示用户地址 |
| AUTH-02 | 用户注册 | 用户已连接钱包 | 1. 填写注册表单<br>2. 提交表单 | 成功创建用户资料，重定向到主页 |
| AUTH-03 | 断开连接 | 用户已连接钱包 | 1. 点击"断开连接" | 成功断开钱包连接，返回未登录状态 |

### 论文管理测试

| ID | 测试用例 | 前置条件 | 步骤 | 预期结果 |
|----|---------|---------|------|---------|
| PAPER-01 | 上传论文 | 用户已登录 | 1. 导航到上传页面<br>2. 填写论文信息<br>3. 上传PDF文件<br>4. 提交表单 | 成功上传论文，显示在用户的论文列表中 |
| PAPER-02 | 查看论文 | 存在可访问的论文 | 1. 导航到论文页面<br>2. 点击论文标题 | 成功显示论文详情和预览 |
| PAPER-03 | 下载论文 | 存在可访问的论文 | 1. 导航到论文详情页<br>2. 点击下载按钮 | 成功下载论文PDF文件 |
| PAPER-04 | 添加引用 | 用户已登录，拥有论文 | 1. 导航到论文详情页<br>2. 点击"添加引用"<br>3. 选择要引用的论文<br>4. 填写引用信息<br>5. 提交 | 成功添加引用，显示在引用列表中 |
| PAPER-05 | 搜索论文 | 系统中存在多篇论文 | 1. 导航到搜索页面<br>2. 输入搜索关键词<br>3. 应用过滤器<br>4. 提交搜索 | 显示符合搜索条件的论文列表 |

### 数据集管理测试

| ID | 测试用例 | 前置条件 | 步骤 | 预期结果 |
|----|---------|---------|------|---------|
| DATA-01 | 上传数据集 | 用户已登录 | 1. 导航到上传页面<br>2. 填写数据集信息<br>3. 上传数据文件<br>4. 提交表单 | 成功上传数据集，显示在用户的数据集列表中 |
| DATA-02 | 查看数据集 | 存在可访问的数据集 | 1. 导航到数据集页面<br>2. 点击数据集标题 | 成功显示数据集详情 |
| DATA-03 | 下载数据集 | 存在可访问的数据集 | 1. 导航到数据集详情页<br>2. 点击下载按钮 | 成功下载数据集文件 |
| DATA-04 | 搜索数据集 | 系统中存在多个数据集 | 1. 导航到搜索页面<br>2. 输入搜索关键词<br>3. 应用过滤器<br>4. 提交搜索 | 显示符合搜索条件的数据集列表 |

### 评论功能测试

| ID | 测试用例 | 前置条件 | 步骤 | 预期结果 |
|----|---------|---------|------|---------|
| COMM-01 | 添加评论 | 用户已登录，查看论文/数据集 | 1. 导航到详情页<br>2. 输入评论内容<br>3. 提交评论 | 成功添加评论，显示在评论列表中 |
| COMM-02 | 编辑评论 | 用户已添加评论 | 1. 点击评论的编辑按钮<br>2. 修改评论内容<br>3. 保存修改 | 成功更新评论内容 |
| COMM-03 | 删除评论 | 用户已添加评论 | 1. 点击评论的删除按钮<br>2. 确认删除 | 成功删除评论，从列表中移除 |

### 存储集成测试

| ID | 测试用例 | 前置条件 | 步骤 | 预期结果 |
|----|---------|---------|------|---------|
| STOR-01 | 小文件上传 | 用户已登录 | 1. 上传小于20MB的文件 | 使用标准上传方式成功上传文件 |
| STOR-02 | 大文件上传 | 用户已登录 | 1. 上传大于20MB的文件 | 使用分块上传方式成功上传文件 |
| STOR-03 | 文件检索 | 已上传文件 | 1. 访问已上传文件的URL | 成功获取并显示/下载文件 |

## 测试进度跟踪

| 阶段 | 计划开始日期 | 计划结束日期 | 实际开始日期 | 实际结束日期 | 状态 | 备注 |
|-----|------------|------------|------------|------------|------|------|
| 单元测试 | | | | | 未开始 | |
| 集成测试 | | | | | 未开始 | |
| 性能测试 | | | | | 未开始 | |
| 安全测试 | | | | | 未开始 | |
| 用户验收测试 | | | | | 未开始 | |

## 缺陷跟踪

| ID | 描述 | 严重程度 | 优先级 | 状态 | 发现日期 | 修复日期 | 验证日期 |
|----|------|---------|-------|------|---------|---------|---------|
| | | | | | | | |

## 测试资源

- 测试环境配置文档
- 测试数据集
- 测试账号和钱包
- 自动化测试脚本

## 风险与缓解策略

| 风险 | 影响 | 可能性 | 缓解策略 |
|-----|------|-------|---------|
| Sui测试网不稳定 | 高 | 中 | 准备备用测试环境，使用模拟数据进行本地测试 |
| Walrus服务中断 | 高 | 低 | 实现本地缓存机制，准备备用存储方案 |
| 浏览器兼容性问题 | 中 | 高 | 在多种浏览器上进行测试，使用polyfill解决兼容性问题 |
| 大文件上传失败 | 中 | 中 | 实现断点续传，添加重试机制 |

## 测试完成标准

- 所有关键功能测试用例通过率达到100%
- 所有高优先级缺陷已修复并验证
- 性能指标满足要求（页面加载时间<3秒，交易响应时间<5秒）
- 安全测试未发现高风险漏洞

## 测试报告模板

### 测试摘要
- 测试周期：[开始日期] 至 [结束日期]
- 测试范围：[功能模块列表]
- 测试执行情况：[计划/实际执行的测试用例数]

### 测试结果
- 通过率：[百分比]
- 失败用例：[数量及列表]
- 阻塞问题：[数量及描述]

### 缺陷统计
- 总缺陷数：[数量]
- 按严重程度分布：[图表]
- 按模块分布：[图表]

### 性能测试结果
- 页面加载时间：[平均值]
- 交易响应时间：[平均值]
- 资源使用情况：[CPU/内存使用率]

### 结论与建议
- 测试结论：[总体评价]
- 改进建议：[列表]
- 遗留风险：[描述]
